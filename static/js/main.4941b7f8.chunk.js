(this["webpackJsonpformial-example"]=this["webpackJsonpformial-example"]||[]).push([[0],{57:function(e,t,n){e.exports=n(67)},58:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);n(58);var a=n(0),r=n.n(a),c=n(35),i=n.n(c),l=n(6),o=(n(36),n(24)),u=n(16),s=n(55),d=n(14),m=n(10),p=n(13),f=n(12),b=n(2),h=n(7),E=n(8),v=n(5),O=n(11),g=n.n(O),j=n(54),x=n(71),y=n(72),w=n(70),N=n(23),k=n.n(N),T=n(48),C=n(44),R=n(49),A=n(45),I=n(37),D=n(43),S=n(50),H=n(47),P=n(46),B=n(29),L=n(53),U=n(52);function z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function _(e){return"INPUT"===e.type}function M(e){return"CONTAINER"===e.type}function W(e){return"TEXT"===e.type}function F(e){return"FORM"===e.type}var V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(h.a)(this,e),this.control=t,this.id=n.id||z(),this.data=k()({className:""},n)}return Object(E.a)(e,[{key:"serialize",value:function(){return Object(b.a)({id:this.id,type:"element",control:this.control.id},this.data)}}]),e}(),G=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).direction=a.direction||"row",r.children=a.children||[],r}return Object(E.a)(n,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(m.a)(n.prototype),"serialize",this).call(this)),this.data),{},{children:this.children.map((function(e){return e.serialize()})),direction:this.direction,type:"CONTAINER"})}},{key:"isRow",get:function(){return"row"===this.direction}}]),n}(V),X=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e,a){Object(h.a)(this,n);var r=e.get("col");if(!r)throw new Error("Column control doesn't exist?");return t.call(this,r,Object(b.a)(Object(b.a)({},a),{},{direction:"row"}))}return Object(E.a)(n,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)({},Object(d.a)(Object(m.a)(n.prototype),"serialize",this).call(this)),{},{type:"FORM"})}}]),n}(G),J=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)(this,n),(a=t.call(this,e,r)).data=k.a.all([{tag:"para"===e.id?"p":"h3",text:"Some text\u2026",className:""},r]),a}return Object(E.a)(n,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(m.a)(n.prototype),"serialize",this).call(this)),this.data),{},{type:"TEXT"})}}]),n}(V),q=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)(this,n),(a=t.call(this,e,r)).data=k()({label:"".concat(a.control.name," label"),className:"mb-2",name:"".concat(a.control.id,"-").concat(Math.round(9999*Math.random())+1e3),classNames:{wrapper:a.wrapperClassName,label:"",input:"form-control"},attributes:{}},r),e.hasOptions&&!a.data.options&&(a.data.options={}),a}return Object(E.a)(n,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(m.a)(n.prototype),"serialize",this).call(this)),this.data),{},{type:"INPUT"})}},{key:"wrapperClassName",get:function(){switch(this.control.id){case"input":case"textarea":case"select":return"form-floating"}return"form-control"}},{key:"placeholder",get:function(){return this.control.placeholder&&this.control.placeholder(this)||null}},{key:"optionPairs",get:function(){var e=this.data.options;return e?Object.keys(e).map((function(t){return[t,e[t]]})):[]}}]),n}(V),Y=function(){function e(t){Object(h.a)(this,e),this.name=t.name,this.id=t.id,this.icon=t.icon,this.placeholder=t.placeholder,this.hasOptions=t.hasOptions}return Object(E.a)(e,[{key:"createElement",value:function(){return new q(this)}}]),e}();function K(e){return e instanceof G}function Q(e){return e instanceof q}function Z(e){return e instanceof J}var $=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"createElement",value:function(){return new G(this,{direction:"row"})}}]),n}(Y),ee=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"createElement",value:function(){return new J(this)}}]),n}(Y),te=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"createElement",value:function(){return new G(this,{direction:"column"})}}]),n}(Y),ne={registered:new Map,register:function(e){var t=this;e.forEach((function(e){return t.registered.set(e.id,e)}))}};var ae=Object(a.createContext)(null);ae.displayName="StoreContext";var re=function(){return Object(a.useContext)(ae)},ce=function(){return re().store},ie=function e(t,n){var a=t.get(n.control);if(!a)return null;if(W(n))return new J(a,n);if(_(n))return new q(a,n);var r=[],c=n.children;return c&&c.forEach((function(n){var a=e(t,n);a&&r.push(a)})),M(n)?new G(a,Object(b.a)(Object(b.a)({},n),{},{children:r})):new X(t,Object(b.a)(Object(b.a)({},n),{},{children:r}))},le=function(e,t){switch(t.type){case"ADD_ELEMENT":return function(e,t){var n,a,r=t.id,c=t.container,i=t.destIndex,l=t.fromIndex,o=t.fromContainer;if(null!=l&&o)a=o.children[l],o.children.splice(l,1),o===c&&l<i&&(i-=1);else if(!(n=e.controls.get(r)))return console.warn("attempted to drop id ".concat(r," but no control exists")),e;return!a&&n&&(a=n.createElement()),a&&c.children.splice(i,0,a),Object(b.a)({},e)}(e,t);case"REPLACE":if(t.form){var n=ie(e.controls,t.form);if(n&&n instanceof X)return Object(b.a)(Object(b.a)({},e),{},{form:n})}return e;case"DELETE":return t.container.children=Object(s.a)(t.container.children.filter((function(e){return e.id!==t.target.id}))),Object(b.a)({},e);case"UPDATE":return t.target.data=k()(t.target.data,t.patch),Object(b.a)({},e);case"EDIT":return Object(b.a)(Object(b.a)({},e),{},{editing:t.target});case"HIDE_EDIT":return Object(b.a)(Object(b.a)({},e),{},{editing:void 0});case"ADD_ATTRIBUTE":return t.input.data[t.nested][""]="",Object(b.a)({},e);case"REPLACE_NEW_ATTRIBUTE":return delete t.input.data[t.nested][""],t.input.data[t.nested][t.name]="",Object(b.a)({},e);case"DELETE_ATTRIBUTE":return delete t.input.data[t.nested][t.name],Object(b.a)({},e)}return e},oe=function(e){var t=Object.create(null);return t.controls=new Map(ne.registered),t.form=e?ie(t.controls,e):new X(t.controls,e),t},ue=function(e){var t=function(e){return Object(a.useReducer)(le,e,oe)}(e),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(a.useMemo)((function(){return{store:r,dispatch:c}}),[r])},se=function(e,t){var n=e.optionPairs;return 0===n.length?t("",""):n.map((function(e){var n=Object(l.a)(e,2),r=n[0],c=n[1];return Object(a.createElement)("label",{key:r},t(r,c),Object(a.createElement)("span",null,c))}))};ne.register([new ee({id:"heading",name:"Heading",icon:Object(a.createElement)(I.a,null),placeholder:function(e){return Object(a.createElement)(e.data.tag,e.data.text)}}),new ee({id:"para",name:"Paragraph",icon:Object(a.createElement)(D.a,null),placeholder:function(e){return Object(a.createElement)("p",null,e.data.text)}}),new Y({id:"input",name:"Text Input",icon:Object(a.createElement)(C.a,null),placeholder:function(){return Object(a.createElement)("input",{type:"text",className:"form-control",readOnly:!0})}}),new Y({id:"textarea",name:"Text Area",icon:Object(a.createElement)(A.a,null),placeholder:function(){return Object(a.createElement)("textarea",{className:"form-control",readOnly:!0})}}),new Y({id:"checkbox",name:"Checkboxes",icon:Object(a.createElement)(P.a,null),hasOptions:!0,placeholder:function(e){return se(e,(function(e){return Object(a.createElement)("input",{type:"checkbox",name:e,readOnly:!0})}))}}),new Y({id:"radio",name:"Radio Input",hasOptions:!0,icon:Object(a.createElement)(H.a,null),placeholder:function(e){return se(e,(function(t){return Object(a.createElement)("input",{key:t,type:"radio",name:e.data.name,readOnly:!0})}))}}),new Y({id:"select",name:"Select",hasOptions:!0,icon:Object(a.createElement)(T.a,null),placeholder:function(e){var t=e.optionPairs;return Object(a.createElement)("select",{name:e.data.name},t.map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.createElement)("option",{key:n,value:n},r)})))}}),new $({id:"row",name:"Row",icon:Object(a.createElement)(R.a,null)}),new te({id:"col",name:"Column",icon:Object(a.createElement)(S.a,null)})]);var de=v.a.h4.attrs({className:"title"})({borderBottom:"1px solid lightgray"}),me=v.a.div({flexGrow:1,overflow:"auto",minHeight:0,paddingRight:"10px"}),pe=v.a.div({flex:1,display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,overflow:"hidden"}),fe=v.a.li({cursor:"pointer",backgroundColor:"white",listStyle:"none",margin:"5px",padding:"10px",userSelect:"none",border:"1px dashed #ddd",svg:{height:"20px",marginRight:"0.5rem"}}),be=function(e){var t=e.id,n=e.name,r=e.icon,c=Object(x.a)({item:{id:t,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),i=Object(l.a)(c,2),o=i[0].opacity,u=i[1];return Object(a.createElement)(fe,{ref:u,style:{opacity:o}},r,Object(a.createElement)("span",null,n))},he=v.a.div({}),Ee=function(){var e=ce(),t=e.editing,n=e.controls;return t?null:Object(a.createElement)(he,null,Object(a.createElement)(de,null,"Elements"),Object(a.createElement)(me,{className:"listing"},Object(a.createElement)("ul",null,Array.from(n.values()).map((function(e){return Object(a.createElement)(be,Object.assign({key:e.id},e))})))))};var ve={};function Oe(e,t,n){var r=Object(a.useMemo)((function(){return Array.isArray(e)?e:[e]}),[e]),c=Object.assign({},ve,n),i=Object(a.useRef)(t),l=c.target;Object(a.useEffect)((function(){i.current=t}));var o=Object(a.useCallback)((function(e){r.some((function(t){return e.key===t}))&&i.current(e)}),[r]);Object(a.useEffect)((function(){if("undefined"!==typeof window){var e=l?l.current:window;return e&&e.addEventListener("keydown",o),function(){e&&e.removeEventListener("keydown",o)}}}),[r,l,t])}var ge=Object(a.createContext)(!1);ge.displayName="FocusContext";var je=function(e){var t=e.input,n=e.nested,c=re(),i=Object(a.useContext)(ge),l=Object(a.useRef)(null),o=function(){return c.dispatch({type:"REPLACE_NEW_ATTRIBUTE",nested:n,input:t,name:l.current.value})},u=function(){return c.dispatch({type:"DELETE_ATTRIBUTE",input:t,nested:n,name:""})};return Oe(["Enter","Escape"],(function(e){switch(e.key){case"Enter":o();break;case"Escape":u()}}),{target:l}),Object(a.useEffect)((function(){i&&l.current.focus()}),[i]),r.a.createElement("label",null,r.a.createElement("input",{ref:l,defaultValue:"",onBlur:o}),r.a.createElement("span",{className:"value"}),r.a.createElement("button",{onClick:u,className:"del-attr"},r.a.createElement(B.a,null)))},xe=function(e){var t=e.input,n=e.nested,c=e.attributeName,i=re(),l=Object(a.useContext)(ge),o=Object(a.useRef)(null);return Oe(["Enter","Tab"],(function(e){e.preventDefault(),i.dispatch({type:"ADD_ATTRIBUTE",nested:n,input:t})}),{target:o}),Object(a.useEffect)((function(){var e=Object.keys(t.data[n]);l&&c===e[e.length-1]&&o.current.focus()}),[l]),r.a.createElement("label",null,r.a.createElement("span",null,c,":"),r.a.createElement("input",{ref:o,className:"value",value:t.data[n][c]||"",onChange:function(e){var a=e.target.value;return i.dispatch({type:"UPDATE",target:t,patch:Object(u.a)({},n,Object(u.a)({},c,a))})}}),r.a.createElement("button",{onClick:function(){i.dispatch({type:"DELETE_ATTRIBUTE",input:t,nested:n,name:c})},className:"del-attr"},r.a.createElement(B.a,null)))},ye=function(e){var t=e.input,n=e.nested,a=e.attributeName;return""===a?r.a.createElement(je,{nested:n,input:t}):r.a.createElement(xe,{nested:n,attributeName:a,input:t})},we=function(e){var t=e.label,n=e.input,a=e.nested,c=re(),i=n.data[a];if(!i)return null;var l=Object.keys(i);return r.a.createElement("fieldset",{className:"options"},r.a.createElement("legend",null,t,":"),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:function(){return c.dispatch({type:"ADD_ATTRIBUTE",nested:a,input:n})},className:"add-attr"},"+")),l.length>0&&r.a.createElement("div",{className:"heading"},r.a.createElement("span",null,"ID"),r.a.createElement("span",null,"Value")),l.map((function(e){return r.a.createElement(ye,{key:e,nested:a,input:n,attributeName:e})})))},Ne=function(e){var t=e.input,n=re(),a=t.data,c=function(e){return n.dispatch({type:"UPDATE",target:t,patch:e})};return r.a.createElement(pe,{className:"input"},r.a.createElement(de,null,"Edit ",t.control.name),r.a.createElement(me,null,r.a.createElement("label",null,r.a.createElement("span",null,"Label:"),r.a.createElement("input",{className:"value",value:a.label||"",onChange:function(e){var t=e.target.value;return c({label:t})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Name:"),r.a.createElement("input",{className:"value",value:a.name||"",onChange:function(e){var t=e.target.value;return c({name:t})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:a.className||"",onChange:function(e){var t=e.target.value;return c({className:t})}})),r.a.createElement(we,{input:t,label:"Options",nested:"options"}),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Other Class Names:"),r.a.createElement("label",null,r.a.createElement("span",null,"Wrapper:"),r.a.createElement("input",{className:"value",value:a.classNames.wrapper||"",onChange:function(e){var t=e.target.value;return c({classNames:{wrapper:t}})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Label:"),r.a.createElement("input",{className:"value",value:a.classNames.label||"",onChange:function(e){var t=e.target.value;return c({classNames:{label:t}})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Input:"),r.a.createElement("input",{className:"value",value:a.classNames.input||"",onChange:function(e){var t=e.target.value;return c({classNames:{input:t}})}}))),r.a.createElement(we,{input:t,label:"Attributes",nested:"attributes"})))},ke=function(e){var t=e.container,n=re(),a=t.data;return r.a.createElement(pe,{className:"container"},r.a.createElement(de,null,"Edit ",t.control.name," container"),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:a.className||"",onChange:function(e){var a,r=e.target.value;return a={className:r},n.dispatch({type:"UPDATE",target:t,patch:a})}})))},Te=function(e){var t=e.txt,n=e.onChange;return"heading"!==t.control.id?null:r.a.createElement("label",null,r.a.createElement("span",null,"Size:"),r.a.createElement("select",{value:t.data.tag,onChange:function(e){return n(e.target.value)}},r.a.createElement("option",{value:"h1"},"Heading 1"),r.a.createElement("option",{value:"h2"},"Heading 2"),r.a.createElement("option",{value:"h3"},"Heading 3"),r.a.createElement("option",{value:"h4"},"Heading 4"),r.a.createElement("option",{value:"h5"},"Heading 5"),r.a.createElement("option",{value:"h6"},"Heading 6")))},Ce=function(e){var t=e.control,n=re(),a=t.data,c=function(e){return n.dispatch({type:"UPDATE",target:t,patch:e})};return r.a.createElement(pe,{className:"text"},r.a.createElement(de,null,"Edit text"),r.a.createElement("label",null,r.a.createElement("span",null,"Text:"),r.a.createElement("textarea",{id:t.id,value:a.text||"",onChange:function(e){var t=e.target.value;return c({text:t})}})),r.a.createElement(Te,{txt:t,onChange:function(e){return c({tag:e})}}),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:a.className||"",onChange:function(e){var t=e.target.value;return c({className:t})}})))},Re=function(e){var t=e.target;return K(t)?r.a.createElement(ke,{container:t}):Q(t)?r.a.createElement(Ne,{input:t}):Z(t)?r.a.createElement(Ce,{control:t}):null},Ae=v.a.div({height:"100%",background:"white",display:"flex",flexDirection:"column",overflow:"hidden",".edit-pane":{flex:1,overflowY:"auto",padding:"10px"},".footer":{padding:"10px",display:"flex",justifyContent:"flex-end",borderTop:"1px solid lightGrey"},legend:{backgroundColor:"#000",color:"#fff",padding:"3px 6px",fontSize:"16px"},"label, .heading":{display:"flex",marginBottom:"5px","> *:first-child":{width:"125px"}},".heading > *":{fontWeight:"bold"},".value":{minWidth:"150px",flex:1},button:{marginLeft:"1rem",svg:{height:"18px"}},fieldset:{marginTop:"1rem",".controls":{display:"flex",justifyContent:"flex-end",".add-attr":{border:0,padding:"0 5px"}}},textarea:{width:"100%",minHeight:"50px",padding:"4px"},".widths":{".row":{display:"flex",justifyContent:"space-between",span:{flex:1,display:"flex",justifyContent:"flex-end",marginRight:"10px",width:"inherit"}}}}),Ie=function(){var e,t,n=re(),c=Object(a.useState)(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],s=Object(a.useRef)(null),d=n.store.editing;return e=s,t=function(){Object(a.useCallback)((function(){return n.dispatch({type:"HIDE_EDIT"})}),[n.dispatch])},Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e,t]),Object(a.useEffect)((function(){d||u(!1),d&&setTimeout((function(){if(s.current){u(!0);var e=s.current.querySelector("input,textarea");e&&e.focus()}}),250)}),[d]),d?r.a.createElement(ge.Provider,{value:o},r.a.createElement(Ae,{ref:s,className:"edit-panel"},d&&r.a.createElement(Re,{target:d}))):null},De=v.a.div({overflow:"hidden",display:"flex","> *":{display:"flex",flexDirection:"column",flex:1,flexGrow:1,minHeight:0},ul:{padding:0,margin:0}}),Se=function(){return Object(a.createElement)(De,{className:"sidebar"},Object(a.createElement)(Ee,null),Object(a.createElement)(Ie,null))},He=function(e){var t=e.onTextSaved,n=e.textValue,c=e.children,i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],s=o[1],d=Object(a.useState)(n),m=Object(l.a)(d,2),p=m[0],f=m[1],b=Object(a.useRef)(null),h=Object(a.useRef)(null),E=Object(a.useRef)(null),v=function(){E.current&&E.current.value!==n&&t(E.current.value),s(!1)};Oe(["Enter","Escape"],(function(e){switch(e.key){case"Enter":v();break;case"Escape":f(n),s(!1)}}),{target:E}),Object(a.useEffect)((function(){if(!1!==u){var e=u,t=E.current;t.focus(),t.setSelectionRange(e.position,e.position)}}),[u]);var O=Object(a.useCallback)((function(){v()}),[]),j=Object(a.useCallback)((function(e){return f(e.target.value)}),[f]),x=Object(a.useCallback)((function(){var e=window.getSelection();if(e){var t=e.getRangeAt(0);s({position:t.startOffset})}}),[s]);return r.a.createElement("span",{className:g()("inline-text",e.className),ref:b},r.a.createElement("span",{ref:h,onClick:x,style:{display:u?"none":"inline"},className:"inline-text display"},c),r.a.createElement("input",{ref:E,style:{display:u?"inline":"none"},value:p,onChange:j,onBlur:O,className:"inline-text editing"}))},Pe=v.a.div({transition:"all 0.3s ease-in-out"}),Be=Object(v.a)(Pe)({height:"15px","&.isHovered":{height:"100px",background:"#e8e8e8"},"&:last-child":{flex:1}}),Le=function(e){var t=e.index,n=e.container,a=re(),r=Object(y.a)({accept:"control",collect:function(e){return{isHovered:e.isOver()}},drop:function(e){var r=e.id,c=e.fromIndex,i=e.fromContainer;a.dispatch({type:"ADD_ELEMENT",id:r,destIndex:t,container:n,fromIndex:c,fromContainer:i})}}),c=Object(l.a)(r,2);return{isHovered:c[0].isHovered,dropRef:c[1]}},Ue=function(e){var t=Le(e),n=t.isHovered,r=t.dropRef;return Object(a.createElement)(Be,{ref:r,className:g()("drop",{isHovered:n})})},ze=Object(v.a)(Pe)({minWidth:"20px","&.isHovered":{flex:1,background:"#e8e8e8"}}),_e=function(e){var t=Le(e),n=t.isHovered,r=t.dropRef;return Object(a.createElement)(ze,{ref:r,className:g()("drop","container-drop",{isHovered:n})})},Me=v.a.div({display:"flex",flexDirection:"row",position:"relative",padding:"20px",color:"#0c0c0c",justifyContent:"space-between",alignItems:"flex-start",minHeight:"fit-content","&.input .label, &.textarea .label":{marginBottom:"-20px",zIndex:1,fontSize:"80%",marginLeft:"10px"},".control-type":{fontSize:"0.8rem",position:"absolute",top:0,right:0,border:"1px solid",padding:"2px",borderRadius:"8px"},"&:hover":{backgroundColor:"white","> .controls":{opacity:1}},".controls":{opacity:0,position:"absolute",transition:"opacity 0.3s ease-in-out",display:"flex",justifyContent:"space-around",alignItems:"flex-start",".move svg":{cursor:"move"},button:{border:0,padding:0,cursor:"pointer",backgroundColor:"transparent","&:hover":{svg:{color:"#212121"}}},svg:{height:"20px",color:"gray",transition:"opacity 0.3s ease-in-out"}},">.controls":{background:"white",right:0,top:0,padding:"5px",borderBottomLeftRadius:"5px",position:"absolute",width:"fit-content","> *":{margin:"0 5px"}},".inline-text":{padding:0,border:0,fontSize:"inherit","&:focus":{outline:"none"}},".label":{fontSize:"20px",marginBottom:"5px"},".control-preview":{flex:1,display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexDirection:"column",justifyContent:"center","&.row":{flexDirection:"column"}},"input + span":{marginLeft:"10px"}}),We=function(e){var t=e.target,n=e.container,r=e.drag,c=re();return Object(a.createElement)("div",{className:g()("controls",{container:K(t)})},Object(a.createElement)("span",null,t.control.name),Object(a.createElement)("button",{className:"trash",onClick:function(){return c.dispatch({type:"DELETE",target:t,container:n})}},Object(a.createElement)(B.a,null)),Object(a.createElement)("button",{onClick:function(){return c.dispatch({type:"EDIT",target:t})}},Object(a.createElement)(U.a,null)),Object(a.createElement)("button",{className:"move",ref:r},Object(a.createElement)(L.a,null)))},Fe=function(e){var t=e.index,n=e.input,r=e.container,c=Object(x.a)({item:{id:n.id,fromIndex:t,fromContainer:r,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),i=Object(l.a)(c,3),o=i[0].opacity,u=i[1],s=i[2];return Object(a.createElement)(Me,{ref:s,style:{opacity:o},className:g()("element-preview",n.control.id)},Object(a.createElement)(We,{target:n,container:r,drag:u}),Object(a.createElement)("div",{className:"control-preview"},Object(a.createElement)("span",{className:"label"},n.data.label),n.placeholder))},Ve=function(e){var t=e.index,n=e.control,r=e.container,c=re(),i=Object(x.a)({item:{id:n.id,fromIndex:t,fromContainer:r,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),o=Object(l.a)(i,3),u=o[0].opacity,s=o[1],d=o[2],m=Object(a.createElement)(n.data.tag,{},n.data.text);return Object(a.createElement)(Me,{ref:d,style:{opacity:u},className:g()("element-preview",n.control.id)},Object(a.createElement)(We,{target:n,container:r,drag:s}),Object(a.createElement)("div",{className:"control-preview"},Object(a.createElement)(He,{onTextSaved:function(e){c.dispatch({type:"UPDATE",target:n,patch:{text:e}})},textValue:n.data.text},m)))},Ge=Object(v.a)(Me)({border:"1px dashed gray",padding:"0",alignItems:"stretch","> .container.controls":{background:"white",border:"1px dashed gray",flexDirection:"row-reverse",width:"fit-content","> *":{margin:"0 5px"}},"&.container-row":{flexDirection:"column",justifyContent:"flex-start",minHeight:"80px","> .container-drop":{width:"100%"},"> .container-column":{margin:"-1px",flex:1},"> .container.controls":{top:"-27px",left:0,padding:"2px 5px",borderTopRightRadius:"5px",borderTopLeftRadius:"5px",borderBottomWidth:0}},"> .container-preview":{flex:1},"&.empty":{alignItems:"stretch"},"&.container-column":{"> .container.controls":{top:"calc(50% - 40px)",left:"-25px",right:"auto",display:"flex",width:"30px",borderRadius:"5px",alignItems:"center",writingMode:"vertical-rl",textOrientation:"upright",fontSize:"80%","> *":{margin:"5px 0"}},"> .element-preview":{flex:1}}}),Xe=function(e){var t=e.parent,n=e.container,r=e.index,c=Object(x.a)({item:{id:n.id,fromIndex:r,fromContainer:t,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),i=Object(l.a)(c,3),o=i[0].opacity,u=i[1],s=i[2],d=n.isRow?Ue:_e;return Object(a.createElement)(Ge,{ref:s,style:{opacity:o},className:g()("container-preview","container-".concat(n.direction),{empty:0===n.children.length})},Object(a.createElement)(d,{container:n,index:0}),Object(a.createElement)(We,{target:n,container:t,drag:u}),n.children.map((function(e,t){return Object(a.createElement)(a.Fragment,{key:t},Object(a.createElement)(Je,{index:t,container:n,el:e}),Object(a.createElement)(d,{container:n,index:t+1}))})))},Je=function(e){var t=e.el,n=e.index,r=e.container;return K(t)?Object(a.createElement)(Xe,{parent:r,container:t,index:n}):Z(t)?Object(a.createElement)(Ve,{control:t,container:r,index:n}):Q(t)?Object(a.createElement)(Fe,{input:t,container:r,index:n}):null},qe=Object(v.a)(me)((function(e){return{flex:1,display:"flex",flexDirection:"column",justifyItems:"flex-start",background:"#fafafa",padding:"20px",boxSizing:"border-box",boxShadow:"0 0 2px 1px rgba(0, 0, 0, 0.1)",opacity:e.editing?"0.3":"1",transition:"all 0.3s ease-in-out",width:"fit-content",minWidth:"100%","> .container-preview":{margin:"0 2px"},"p, h1, h2, h3, h4, h5, h6":{padding:0,margin:0}}})),Ye=function(){var e=ce(),t=e.form,n=e.editing,r=Object(y.a)({accept:"control",collect:function(e){return{isHovered:e.isOver()}},canDrop:function(){return!1}}),c=Object(l.a)(r,2),i=c[0].isHovered,o=c[1];return Object(a.createElement)(qe,{ref:o,editing:!!n,className:g()("form-elements",{isHovered:i})},Object(a.createElement)(Ue,{container:t,index:0}),t.children.map((function(e,n){return Object(a.createElement)(a.Fragment,{key:n},Object(a.createElement)(Je,{index:n,container:t,el:e}),Object(a.createElement)(Ue,{container:t,index:n+1}))})))},Ke=v.a.div({display:"flex",width:"100%",overflow:"hidden"}),Qe=function(){return Object(a.createElement)(Ke,null,Object(a.createElement)(Ye,null))},Ze=v.a.div({display:"grid",gridTemplateColumns:"1fr 300px",gridTemplateRows:"1fr",height:"100%",gap:"10px",position:"relative"}),$e=function(e){var t=e.className,n=e.onChange,r=e.value,c=e.defaultValue,i=ue(c);return Object(a.useEffect)((function(){i.dispatch({type:"REPLACE",form:r})}),[r]),Object(a.useEffect)((function(){n&&n(i.store.form)}),[n,i.store]),Object(a.createElement)(w.a,{backend:j.a},Object(a.createElement)(ae.Provider,{value:i},Object(a.createElement)(Ze,{className:g()("formial-editor",t)},Object(a.createElement)(Qe,null),Object(a.createElement)(Se,null))))},et=function(){function e(t,n){Object(h.a)(this,e),this.data=t,this.options=n}return Object(E.a)(e,[{key:"createElement",value:function(){return document.createElement("div")}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.el||(this.el=this.createElement()),this.setAttributes({"data-control":this.data.type,"data-id":this.data.id,class:g()(this.data.className,Object(u.a)({},"col-sm-".concat(this.columnSmWidth),0!==this.columnSmWidth))}),t||this.setAttributes(),this.el.parentElement!==e&&e.appendChild(this.el),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.attributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el;t&&e&&Object.keys(e).forEach((function(n){n&&t.setAttribute(n,String(e[n]))}))}},{key:"columnSmWidth",get:function(){return this.options.parent instanceof at&&this.options.parent.isBSRow?Math.round(12/this.options.parent.children.length):0}}]),e}(),tt=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).data=e,r}return Object(E.a)(n,[{key:"createElement",value:function(){return document.createElement(this.data.tag)}},{key:"render",value:function(e){return Object(d.a)(Object(m.a)(n.prototype),"render",this).call(this,e),this.el.innerText=this.data.text,this}}]),n}(et),nt=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).data=e,r}return Object(E.a)(n,[{key:"render",value:function(e){if(Object(d.a)(Object(m.a)(n.prototype),"render",this).call(this,e,!0),this.setAttributes({"data-type":this.data.control,class:g()(this.data.className,Object(u.a)({},"col-sm-".concat(this.columnSmWidth),0!==this.columnSmWidth))}),!this.input){var t=this["_".concat(this.data.control)];if(t){var a=t.apply(this);this.input=a,this.el.appendChild(this.input)}}return this}},{key:"createInput",value:function(e){var t=document.createElement("div");t.className=this.data.classNames.wrapper;var n=document.createElement(e);this.setAttributes(Object(b.a)({name:this.data.name,id:this.data.id,class:"form-control",placeholder:this.data.label},this.data.attributes),n),t.appendChild(n);var a=document.createElement("label");return a.innerText=this.data.label,this.setAttributes({for:this.data.id},a),t.appendChild(a),t}},{key:"_textarea",value:function(){return this.createInput("textarea")}},{key:"_input",value:function(){return this.createInput("input")}},{key:"renderOptions",value:function(e){var t=this,n=document.createElement("div");this.setAttributes(this.data.attributes,n),n.className=this.data.classNames.wrapper;var a=document.createElement("label");return a.innerText=this.data.label,n.appendChild(a),this.optionPairs.forEach((function(a){var r=Object(l.a)(a,2),c=r[0],i=r[1],o=e(c,i),u=o.id,s=o.inputType,d=o.name,m=o.value,p=o.label,f="".concat(u,"-").concat(t.data.id),b=document.createElement("label");t.setAttributes({class:"form-check"},b);var h=document.createElement("input");t.setAttributes({class:"form-check-input","data-id":u,type:s,name:d,value:m,id:f},h),b.appendChild(h);var E=document.createElement("span");t.setAttributes({className:"form-check-label"},E),E.innerText=p,b.appendChild(E),n.appendChild(b)})),n}},{key:"_radio",value:function(){var e=this;return this.renderOptions((function(t,n){return{inputType:"radio",name:e.data.name,id:t,value:n,label:n}}))}},{key:"_checkbox",value:function(){return this.renderOptions((function(e,t){return{inputType:"checkbox",name:e,value:t,id:e,label:t}}))}},{key:"_select",value:function(){var e=this,t=document.createElement("div");t.className="form-floating";var n=document.createElement("select");this.setAttributes({name:this.data.name,class:"form-select",id:this.data.id},n),this.optionPairs.forEach((function(t){var a=Object(l.a)(t,2),r=a[0],c=a[1],i=document.createElement("option");e.setAttributes({value:r},i),i.innerText=c,n.appendChild(i)})),t.appendChild(n);var a=document.createElement("label");return this.setAttributes({for:this.data.id},a),a.innerText=this.data.label,t.appendChild(a),t}},{key:"optionPairs",get:function(){var e=this.data.options;return e?Object.keys(e).map((function(t){return[t,e[t]]})):[]}}]),n}(et),at=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e,a){var r;return Object(h.a)(this,n),(r=t.call(this,e,a)).data=e,r.children=e.children.map((function(e){return rt(e,{parent:Object(o.a)(r)})})).filter(Boolean),r}return Object(E.a)(n,[{key:"render",value:function(e){var t,a=this;return Object(d.a)(Object(m.a)(n.prototype),"render",this).call(this,e),this.el.className=g()(null===(t=this.el)||void 0===t?void 0:t.className,{row:this.isBSRow,"d-flex flex-column":!this.isBSRow,"formial-form":"FORM"==this.data.type}),this.children.forEach((function(e){return e.render(a.el)})),this}},{key:"isBSRow",get:function(){return"column"===this.data.direction}}]),n}(et),rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(e)?new tt(e,t):M(e)||F(e)?new at(e,t):_(e)?new nt(e,t):new et(e,t)},ct={id:"4f78521b-59a8-4069-8ae8-8b0c793d9f5e",type:"FORM",control:"col",className:"",direction:"row",children:[{id:"5421839e-6592-4c7b-aea6-72dd889f2354",type:"TEXT",control:"heading",tag:"h3",text:"Hello!",className:""},{id:"31650e8e-a0ee-4c2b-a35d-5d5c344fabd0",type:"TEXT",control:"para",tag:"p",text:"Tell us something about yourself",className:""},{id:"e22f3d00-6d2a-4f26-a813-e5581636ae77",type:"CONTAINER",control:"col",className:"",direction:"column",children:[{id:"2f6ada7b-28bb-4a8a-a318-553fd357717b",type:"CONTAINER",control:"row",className:"",direction:"row",children:[{id:"fe50d0bb-ed56-4870-a79c-2a9cf03eacd8",type:"INPUT",control:"input",label:"What's your name?",className:"mb-2",name:"input-5597",classNames:{wrapper:"form-floating",label:"",input:"form-control"},attributes:{}},{id:"70353b38-ff98-46f6-91af-846aeb1881d0",type:"INPUT",control:"textarea",label:"What do you like?",className:"flex-fill",name:"textarea-2452",classNames:{wrapper:"form-floating mb-2",label:"",input:"form-control"},attributes:{}}]},{id:"2b9bed3e-647e-4559-b60e-6e8b6a2427f7",type:"CONTAINER",control:"row",className:"",direction:"row",children:[{id:"80a4df1f-d041-4f9b-b1fc-cd68964a6e7d",type:"INPUT",control:"checkbox",label:"Fruits you like",className:"",name:"checkbox-10613",classNames:{wrapper:"form-control mb-2",label:"",input:"form-control"},attributes:{},options:{1:"Bannana",2:"Orange",3:"Mango"}},{id:"233acef5-b749-4478-8179-142c5635d181",type:"INPUT",control:"radio",label:"How Many Cats?",className:"",name:"radio-7972",classNames:{wrapper:"form-control mb-2",label:"",input:"form-control"},attributes:{},options:{1:"one",2:"two",3:"three"}},{id:"7e7af9f4-1e35-4c4b-af81-e52b9ff7b245",type:"INPUT",control:"select",label:"Pick a number",className:"",name:"select-2778",classNames:{wrapper:"form-floating mb-2",label:"",input:"form-control"},attributes:{},options:{1:"one",2:"two",3:"three",4:"four",5:"five"}}]}]}]},it=function(){var e=r.a.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=r.a.useRef(null);return r.a.createElement("div",{id:"example-builder"},r.a.createElement("h3",null,"Formial Demo"),r.a.createElement("p",null,"This is an example of Formial editing and rendering forms.  The source code for this demo can be viewed in ",r.a.createElement("a",{href:"https://github.com/nathanstitt/formial/blob/main/example/src/App.tsx"},"example/src/App.tsx"),"."),r.a.createElement($e,{onChange:function(e){return a(e)},defaultValue:ct}),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e=n.serialize();console.log(JSON.stringify(e)),function(e,t){e.innerHTML="";var n=rt(t);n&&n.render(e)}(c.current,e)}},"Render")),r.a.createElement("hr",null),r.a.createElement("div",{className:"mb-4",ref:c}))};i.a.render(r.a.createElement(it,null),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.4941b7f8.chunk.js.map