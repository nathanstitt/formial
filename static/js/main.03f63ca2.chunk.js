(this["webpackJsonpformial-example"]=this["webpackJsonpformial-example"]||[]).push([[0],{57:function(e,t,a){e.exports=a(67)},58:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);a(58);var n=a(0),r=a.n(n),i=a(35),l=a.n(i),c=a(6),o=(a(36),a(24)),u=a(20),s=a(55),d=a(15),p=a(11),m=a(14),f=a(13),b=a(2),h=a(8),v=a(9),E=a(5),O=a(7),g=a.n(O),x=a(54),j=a(71),y=a(72),w=a(70),N=a(12),T=a.n(N),C=a(48),k=a(44),I=a(49),D=a(45),R=a(40),P=a(43),A=a(50),_=a(47),H=a(46),S=a(29),L=a(53),V=a(52);function U(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function z(e){return"INPUT"===e.type}function M(e){return"CONTAINER"===e.type}function B(e){return"TEXT"===e.type}function W(e){return"FORM"===e.type}var F=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(h.a)(this,e),this.control=t,this.id=a.id||U(),this.data=T()(t.defaultValues,a)}return Object(v.a)(e,[{key:"serialize",value:function(){return Object(b.a)({id:this.id,type:"element",control:this.control.id},this.data)}}]),e}(),q=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultValues;return Object(h.a)(this,a),(n=t.call(this,e,r)).direction=r.direction||e.defaultValues.direction,n.children=r.children||e.defaultValues.children,n.data=T()(n.data,Object(b.a)(Object(b.a)({},r),{},{className:"",attributes:[]})),n}return Object(v.a)(a,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(p.a)(a.prototype),"serialize",this).call(this)),this.data),{},{children:this.children.map((function(e){return e.serialize()})),direction:this.direction,type:"CONTAINER"})}},{key:"isRow",get:function(){return"row"===this.direction}}]),a}(F),G=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e,n){var r;Object(h.a)(this,a);var i=e.get("col");if(!i)throw new Error("Column control doesn't exist?");return(r=t.call(this,i,Object(b.a)(Object(b.a)({},n),{},{direction:"row"}))).data.className="formial-form",r}return Object(v.a)(a,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)({},Object(d.a)(Object(p.a)(a.prototype),"serialize",this).call(this)),{},{type:"FORM"})}}]),a}(q),X=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)(this,a),(n=t.call(this,e,r)).data=T()(e.defaultValues,r),n}return Object(v.a)(a,[{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(p.a)(a.prototype),"serialize",this).call(this)),this.data),{},{type:"TEXT"})}}]),a}(F),J=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)(this,a),(n=t.call(this,e,r)).data=T()(e.defaultValues,r),n.control.hasOptions&&(n.data.options=n.data.options||[]),n}return Object(v.a)(a,[{key:"nested",value:function(e,t){return this.data[e].find((function(e){return e.id==t}))}},{key:"serialize",value:function(){return Object(b.a)(Object(b.a)(Object(b.a)({},Object(d.a)(Object(p.a)(a.prototype),"serialize",this).call(this)),this.data),{},{type:"INPUT"})}},{key:"placeholder",get:function(){return this.control.placeholder&&this.control.placeholder(this)||null}},{key:"optionPairs",get:function(){var e=this.data.options;return e?e.map((function(e){return[e.id,e.value]})):[]}}]),a}(F),Y=function(){function e(t){Object(h.a)(this,e),this.name=t.name,this.id=t.id,this.icon=t.icon,this.placeholder=t.placeholder,this.hasOptions=t.hasOptions,this._defaultValues=T()(this.defaultValues||{},t.defaultValues||{})}return Object(v.a)(e,[{key:"createElement",value:function(){return new J(this)}},{key:"defaultValues",get:function(){return T()(this._defaultValues,{name:"".concat(this.id,"-").concat(Math.round(9999*Math.random())+1e3)})}}]),e}();function K(e){return e instanceof q}function Q(e){return e instanceof J}function Z(e){return e instanceof X}var $=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e))._defaultValues=T()(n._defaultValues||{},{children:[]}),n}return Object(v.a)(a,[{key:"createElement",value:function(){return new q(this)}}]),a}(Y),ee=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e))._defaultValues=T()(n._defaultValues||{},{label:"".concat(e.name," label"),className:"mb-2",classNames:{wrapper:n.wrapperClassName,label:"",input:"form-control"},attributes:[]}),n}return Object(v.a)(a,[{key:"wrapperClassName",get:function(){switch(this.id){case"input":case"textarea":case"select":return"form-floating"}return"form-control"}}]),a}(Y),te=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e))._defaultValues=T()(n._defaultValues||{},{tag:"para"===n.id?"p":"h3",text:"Some text\u2026",className:""}),n}return Object(v.a)(a,[{key:"createElement",value:function(){return new X(this)}}]),a}(Y),ae={registered:new Map,register:function(e){var t=this;e.forEach((function(e){return t.registered.set(e.id,e)}))}};var ne=Object(n.createContext)(null);ne.displayName="StoreContext";var re=function(){return Object(n.useContext)(ne)},ie=function(){return re().store},le=function e(t,a){var n=t.get(a.control);if(!n)return null;if(B(a))return new X(n,a);if(z(a))return new J(n,a);var r=[],i=a.children;return i&&i.forEach((function(a){var n=e(t,a);n&&r.push(n)})),M(a)?new q(n,Object(b.a)(Object(b.a)({},a),{},{children:r})):new G(t,Object(b.a)(Object(b.a)({},a),{},{children:r}))},ce=function(e,t){switch(t.type){case"ADD_ELEMENT":return function(e,t){var a,n,r=t.id,i=t.container,l=t.destIndex,c=t.fromIndex,o=t.fromContainer;if(null!=c&&o)n=o.children[c],o.children.splice(c,1),o===i&&c<l&&(l-=1);else if(!(a=e.controls.get(r)))return console.warn("attempted to drop id ".concat(r," but no control exists")),e;return!n&&a&&(n=a.createElement()),n&&i.children.splice(l,0,n),Object(b.a)({},e)}(e,t);case"APPEND_ELEMENT":return e.form.children.push(t.control.createElement()),Object(b.a)({},e);case"REPLACE":if(t.form){var a=le(e.controls,t.form);if(a&&a instanceof G)return Object(b.a)(Object(b.a)({},e),{},{form:a})}return e;case"DELETE":return t.container.children=Object(s.a)(t.container.children.filter((function(e){return e.id!==t.target.id}))),Object(b.a)(Object(b.a)({},e),{},{editing:void 0});case"UPSERT_OPTION":var n=t.input.nested(t.nested,t.id);return n?n.value=t.value||"":t.input.data[t.nested].push({id:t.id,value:t.value||""}),Object(b.a)({},e);case"UPDATE_OPTION":return t.option.value=t.value,Object(b.a)({},e);case"UPDATE":return t.target.data=T()(t.target.data,t.patch),Object(b.a)({},e);case"EDIT":return Object(b.a)(Object(b.a)({},e),{},{editing:t.target});case"HIDE_EDIT":return Object(b.a)(Object(b.a)({},e),{},{editing:void 0});case"REORDER_OPTION":var r=t.input.data[t.nested],i=r.findIndex((function(e){return e.id===t.id})),l=r[i];return t.input.data[t.nested].splice(i,1),t.index>i&&(t.index-=1),t.input.data[t.nested].splice(t.index,0,l),Object(b.a)({},e);case"ADD_ATTRIBUTE":return t.input.data[t.nested].push({id:"",value:""}),Object(b.a)({},e);case"REPLACE_NEW_ATTRIBUTE":return delete t.input.data[t.nested][""],t.input.data[t.nested][t.name]="",Object(b.a)({},e);case"DELETE_OPTION":var c=t.input.nested(t.nested,t.id);if(c){var o=t.input.data[t.nested].indexOf(c);-1!=o&&t.input.data[t.nested].splice(o,1)}return Object(b.a)({},e)}return e},oe=function(e){var t=Object.create(null);return t.controls=new Map(ae.registered),t.form=e?le(t.controls,e):new G(t.controls,e),t},ue=function(e){var t=function(e){return Object(n.useReducer)(ce,e,oe)}(e),a=Object(c.a)(t,2),r=a[0],i=a[1];return Object(n.useMemo)((function(){return{store:r,dispatch:i}}),[r])},se=E.a.div((function(e){var t=e.layout,a={display:"flex",width:"100%",flexWrap:"wrap",flexDirection:"column"};if(t&&"vertical"!==t){a.flexDirection="row";var n={paddingRight:"5px"};"two_column"===t&&(n.width="50%"),"three_column"===t&&(n.width="33%"),a["> label"]=n}return a})),de=function(e,t){var a=e.optionPairs;if(0===a.length)return t("","");var r=a.map((function(e){var a=Object(c.a)(e,2),r=a[0],i=a[1];return Object(n.createElement)("label",{key:r},t(r,i),Object(n.createElement)("span",null,i))}));return Object(n.createElement)(se,{layout:e.data.choicesLayout},r)};ae.register([new te({id:"heading",name:"Heading",icon:Object(n.createElement)(R.a,null),placeholder:function(e){return Object(n.createElement)(e.data.tag,e.data.text)}}),new te({id:"para",name:"Paragraph",icon:Object(n.createElement)(P.a,null),placeholder:function(e){return Object(n.createElement)("p",null,e.data.text)}}),new ee({id:"input",name:"Text Input",icon:Object(n.createElement)(k.a,null),placeholder:function(){return Object(n.createElement)("input",{type:"text",className:"form-control",readOnly:!0})}}),new ee({id:"textarea",name:"Text Area",icon:Object(n.createElement)(D.a,null),placeholder:function(){return Object(n.createElement)("textarea",{className:"form-control",readOnly:!0})}}),new ee({id:"checkbox",name:"Checkboxes",icon:Object(n.createElement)(H.a,null),hasOptions:!0,defaultValues:{options:[],choicesLayout:"vertical"},placeholder:function(e){return de(e,(function(e){return Object(n.createElement)("input",{type:"checkbox",name:"pv-".concat(e),readOnly:!0})}))}}),new ee({id:"radio",name:"Radio Input",hasOptions:!0,icon:Object(n.createElement)(_.a,null),defaultValues:{options:[],choicesLayout:"vertical"},placeholder:function(e){return de(e,(function(t){return Object(n.createElement)("input",{key:t,type:"radio",name:"pv-".concat(e.data.name),readOnly:!0})}))}}),new ee({id:"select",name:"Select",hasOptions:!0,icon:Object(n.createElement)(C.a,null),defaultValues:{options:[]},placeholder:function(e){var t=e.optionPairs;return Object(n.createElement)("select",{name:"pv-".concat(e.data.name)},t.map((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.createElement)("option",{key:a,value:a},r)})))}}),new $({id:"row",name:"Row",icon:Object(n.createElement)(I.a,null),defaultValues:{direction:"row"}}),new $({id:"col",name:"Column",icon:Object(n.createElement)(A.a,null),defaultValues:{direction:"column"}})]);var pe=E.a.h4.attrs({className:"title"})({borderBottom:"1px solid lightgray",padding:"5px"}),me=E.a.div({flexGrow:1,overflow:"auto",minHeight:0,paddingRight:"10px"}),fe=E.a.div({flex:1,display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,overflow:"hidden"}),be=E.a.li({cursor:"pointer",backgroundColor:"white",listStyle:"none",margin:"5px",padding:"10px",userSelect:"none",border:"1px dashed #ddd",svg:{height:"20px",marginRight:"0.5rem"}}),he=function(e){var t=e.control,a=t.id,r=t.name,i=t.icon,l=re().dispatch,o=Object(j.a)({item:{id:a,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),u=Object(c.a)(o,2),s=u[0].opacity,d=u[1];return Object(n.createElement)(be,{ref:d,style:{opacity:s},onClick:function(){l({type:"APPEND_ELEMENT",control:t})}},i,Object(n.createElement)("span",null,r))},ve=E.a.div({ul:{padding:0,margin:0}}),Ee=function(){var e=ie(),t=e.editing,a=e.controls;return t?null:Object(n.createElement)(ve,null,Object(n.createElement)(pe,null,"Elements"),Object(n.createElement)(me,{className:"listing"},Object(n.createElement)("ul",null,Array.from(a.values()).map((function(e){return Object(n.createElement)(he,{key:e.id,control:e})})))))};var Oe={};function ge(e,t,a){var r=Object(n.useMemo)((function(){return Array.isArray(e)?e:[e]}),[e]),i=Object.assign({},Oe,a),l=Object(n.useRef)(t),c=i.target;Object(n.useEffect)((function(){l.current=t}));var o=Object(n.useCallback)((function(e){r.some((function(t){return e.key===t}))&&l.current(e)}),[r]);Object(n.useEffect)((function(){if("undefined"!==typeof window){var e=c?c.current:window;return e&&e.addEventListener("keydown",o),function(){e&&e.removeEventListener("keydown",o)}}}),[r,c,t])}var xe=E.a.button({border:0}),je=function(e){var t=e.input,a=e.nested,i=e.onComplete,l=re(),c=Object(n.useRef)(null),o=function(){var e=c.current.value;l.dispatch({type:"UPSERT_OPTION",nested:a,input:t,id:e}),i(e)},u=function(){l.dispatch({type:"DELETE_OPTION",input:t,nested:a,id:""}),i(we)};return ge(["Enter","Escape","Tab"],(function(e){switch(e.key){case"Tab":e.preventDefault(),o();break;case"Enter":o();break;case"Escape":u(),i(we)}}),{target:c}),Object(n.useEffect)((function(){c.current.focus()}),[]),r.a.createElement("label",null,r.a.createElement("input",{ref:c,defaultValue:""}),r.a.createElement("span",{className:"value"}),r.a.createElement(xe,{onClick:u},r.a.createElement(S.a,null)))},ye=Symbol("new"),we=Symbol("delete"),Ne=E.a.label({padding:"2px 0 2px 5px"}),Te=E.a.div({flex:1,cursor:"grab"}),Ce=function(e){var t=e.input,a=e.nested,i=e.focused,l=e.index,o=e.onComplete,u=e.option,s=re(),d=Object(n.useRef)(null),p=Object(j.a)({item:{id:u.id,index:l,type:"option"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),m=Object(c.a)(p,2),f=m[0].opacity,b=m[1];return ge(["Enter","Tab"],(function(e){e.preventDefault(),s.dispatch({type:"UPDATE_OPTION",option:u,value:d.current.value}),o(u.id)}),{target:d}),Object(n.useEffect)((function(){i&&d.current.focus()}),[i]),r.a.createElement(Ne,{className:"draggable",style:{opacity:f},ref:b},r.a.createElement(Te,null,u.id,":"),r.a.createElement("input",{ref:d,className:"value",value:u.value||"",onChange:function(e){var t=e.target.value;return s.dispatch({type:"UPDATE_OPTION",option:u,value:t})}}),r.a.createElement(xe,{onClick:function(){s.dispatch({type:"DELETE_OPTION",id:u.id,input:t,nested:a}),o(we)}},r.a.createElement(S.a,null)))},ke=E.a.div({transition:"all 0.3s ease-in-out",height:"10px",minHeight:"10px","&.isHovered":{height:"40px",minHeight:"40px",border:"1px dashed ".concat("#e8e8e8")},"&:last-child":{flex:1}}),Ie=function(e){var t=e.input,a=e.nested,n=e.index,i=re(),l=Object(y.a)({accept:"option",collect:function(e){return{isHovered:e.isOver()}},drop:function(e){var r=e.id;i.dispatch({type:"REORDER_OPTION",nested:a,input:t,id:r,index:n})}}),o=Object(c.a)(l,2),u=o[0].isHovered,s=o[1];return r.a.createElement(ke,{ref:s,className:g()("drop",{isHovered:u})})},De=function(e){var t=e.label,a=e.input,i=e.nested,l=e.ignore,o=void 0===l?[]:l,u=Object(n.useState)(""),s=Object(c.a)(u,2),d=s[0],p=s[1],m=a.data[i];return m?(m=m.filter((function(e){return!o.includes(e.id)})),r.a.createElement("fieldset",{className:"options"},r.a.createElement("legend",null,t,":"),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:function(){return p(ye)},className:"add-attr"},"\u2795")),m.length?r.a.createElement("div",{className:"heading"},r.a.createElement("span",null,"ID"),r.a.createElement("span",null,"Value")):null,m.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(Ie,{input:a,nested:i,index:t}),r.a.createElement(Ce,{focused:d===e.id,nested:i,option:e,input:a,index:t,onComplete:function(e){e===we?p(""):t===m.length-1&&p(ye)}}))})),r.a.createElement(Ie,{input:a,nested:i,index:m.length}),d===ye&&r.a.createElement(je,{nested:i,input:a,onComplete:function(e){p(e===we?"":e)}}))):null},Re=["input","textarea","radio"],Pe=function(e){var t,a=e.input,n=re();return Re.includes(a.control.id)?r.a.createElement("label",null,r.a.createElement("span",null,"Required?"),r.a.createElement("input",{type:"checkbox",className:"value",checked:"true"===(null===(t=a.nested("attributes","required"))||void 0===t?void 0:t.value)||!1,onChange:function(e){var t=e.target.checked;n.dispatch({type:"UPSERT_OPTION",input:a,nested:"attributes",id:"required",value:String(t)})}})):null},Ae=function(e){var t,a=e.input,n=re();return"input"!==a.control.id?null:r.a.createElement("label",null,r.a.createElement("span",null,"Type:"),r.a.createElement("select",{name:"type",className:"value",value:(null===(t=a.nested("attributes","type"))||void 0===t?void 0:t.value)||"text",onChange:function(e){var t=e.target.value;return n.dispatch({type:"UPSERT_OPTION",input:a,id:"type",nested:"attributes",value:t})}},["text","number","email","date"].map((function(e){return r.a.createElement("option",{key:e,value:e},(t=e).charAt(0).toUpperCase()+t.slice(1));var t}))))},_e=function(e){var t=e.input,a=re();return t.data.choicesLayout?r.a.createElement("label",null,r.a.createElement("span",null,"Choices Layout:"),r.a.createElement("select",{value:t.data.choicesLayout,className:"value",onChange:function(e){var n=e.target.value;return a.dispatch({type:"UPDATE",target:t,patch:{choicesLayout:n}})}},r.a.createElement("option",{value:"vertical"},"Vertical"),r.a.createElement("option",{value:"horizontal"},"Horizontal"),r.a.createElement("option",{value:"two_column"},"Two Column"),r.a.createElement("option",{value:"three_column"},"Three Column"))):null},He=function(e){var t=e.input,a=re(),n=t.data,i=function(e){return a.dispatch({type:"UPDATE",target:t,patch:e})};return r.a.createElement(fe,{className:"input"},r.a.createElement(pe,null,"Edit ",t.control.name),r.a.createElement(me,null,r.a.createElement("label",null,r.a.createElement("span",null,"Label:"),r.a.createElement("input",{className:"value",value:n.label||"",onChange:function(e){var t=e.target.value;return i({label:t})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Name:"),r.a.createElement("input",{className:"value",value:n.name||"",onChange:function(e){var t=e.target.value;return i({name:t})}})),r.a.createElement(Ae,{input:t}),r.a.createElement(Pe,{input:t}),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:n.className||"",onChange:function(e){var t=e.target.value;return i({className:t})}})),r.a.createElement(_e,{input:t}),r.a.createElement(De,{input:t,label:"Options",nested:"options"}),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Other Class Names:"),r.a.createElement("label",null,r.a.createElement("span",null,"Wrapper:"),r.a.createElement("input",{className:"value",value:n.classNames.wrapper||"",onChange:function(e){var t=e.target.value;i({classNames:{wrapper:t}})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Label:"),r.a.createElement("input",{className:"value",value:n.classNames.label||"",onChange:function(e){var t=e.target.value;i({classNames:{label:t}})}})),r.a.createElement("label",null,r.a.createElement("span",null,"Input:"),r.a.createElement("input",{className:"value",value:n.classNames.input||"",onChange:function(e){var t=e.target.value;i({classNames:{input:t}})}}))),r.a.createElement(De,{input:t,label:"Attributes",nested:"attributes",ignore:["required","type"]})))},Se=function(e){var t=e.container,a=re(),n=t.data;return r.a.createElement(fe,{className:"container"},r.a.createElement(pe,null,"Edit ",t.control.name," container"),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:n.className||"",onChange:function(e){var n,r=e.target.value;return n={className:r},a.dispatch({type:"UPDATE",target:t,patch:n})}})))},Le=function(e){var t=e.txt,a=e.onChange;return"heading"!==t.control.id?null:r.a.createElement("label",null,r.a.createElement("span",null,"Size:"),r.a.createElement("select",{value:t.data.tag,onChange:function(e){return a(e.target.value)}},r.a.createElement("option",{value:"h1"},"Heading 1"),r.a.createElement("option",{value:"h2"},"Heading 2"),r.a.createElement("option",{value:"h3"},"Heading 3"),r.a.createElement("option",{value:"h4"},"Heading 4"),r.a.createElement("option",{value:"h5"},"Heading 5"),r.a.createElement("option",{value:"h6"},"Heading 6")))},Ve=function(e){var t=e.control,a=re(),n=t.data,i=function(e){return a.dispatch({type:"UPDATE",target:t,patch:e})};return r.a.createElement(fe,{className:"text"},r.a.createElement(pe,null,"Edit text"),r.a.createElement("label",null,r.a.createElement("span",null,"Text:"),r.a.createElement("textarea",{id:t.id,value:n.text||"",onChange:function(e){var t=e.target.value;return i({text:t})}})),r.a.createElement(Le,{txt:t,onChange:function(e){return i({tag:e})}}),r.a.createElement("label",null,r.a.createElement("span",null,"Class:"),r.a.createElement("input",{className:"value",value:n.className||"",onChange:function(e){var t=e.target.value;return i({className:t})}})))},Ue=function(e){var t=e.target;return K(t)?r.a.createElement(Se,{container:t}):Q(t)?r.a.createElement(He,{input:t}):Z(t)?r.a.createElement(Ve,{control:t}):null},ze=E.a.div({height:"100%",background:"white",display:"flex",flexDirection:"column",overflow:"hidden",".edit-pane":{flex:1,overflowY:"auto",padding:"10px"},".footer":{padding:"10px",display:"flex",justifyContent:"flex-end",borderTop:"1px solid lightGrey"},legend:{backgroundColor:"#000",color:"#fff",padding:"3px 6px",fontSize:"16px"},"label, .heading":{display:"flex",alignItems:"center","&:not(.draggable)":{marginBottom:"5px"},"> *:first-child":{width:"125px"}},".heading > *":{fontWeight:"bold"},".value":{flex:1,width:"125px"},button:{marginLeft:"5px",svg:{height:"18px"}},fieldset:{marginTop:"1rem",".controls":{display:"flex",justifyContent:"flex-end",".add-attr":{border:0,padding:"0 5px"}}},textarea:{width:"100%",minHeight:"50px",padding:"4px"},".widths":{".row":{display:"flex",justifyContent:"space-between",span:{flex:1,display:"flex",justifyContent:"flex-end",marginRight:"10px",width:"inherit"}}}}),Me=function(){var e,t,a=re(),i=Object(n.useRef)(null),l=a.store.editing;return e=i,t=function(){a.dispatch({type:"HIDE_EDIT"})},Object(n.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[e,t]),l?r.a.createElement(ze,{ref:i,className:"edit-panel"},r.a.createElement(Ue,{target:l})):null},Be=E.a.div({overflow:"hidden",display:"flex",paddingBottom:"20px","> *":{display:"flex",flexDirection:"column",flex:1,flexGrow:1,minHeight:0}}),We=function(){return Object(n.createElement)(Be,{className:"sidebar"},Object(n.createElement)(Ee,null),Object(n.createElement)(Me,null))},Fe=E.a.div({transition:"all 0.3s ease-in-out"}),qe=Object(E.a)(Fe)({height:"15px",minHeight:"15px","&.isHovered":{height:"100px",minHeight:"100px",background:"#e8e8e8"},"&:last-child":{flex:1}}),Ge=function(e){var t=e.index,a=e.container,n=re(),r=Object(y.a)({accept:"control",collect:function(e){return{isHovered:e.isOver()}},drop:function(e){var r=e.id,i=e.fromIndex,l=e.fromContainer;n.dispatch({type:"ADD_ELEMENT",id:r,destIndex:t,container:a,fromIndex:i,fromContainer:l})}}),i=Object(c.a)(r,2);return{isHovered:i[0].isHovered,dropRef:i[1]}},Xe=function(e){var t=Ge(e),a=t.isHovered,r=t.dropRef;return Object(n.createElement)(qe,{ref:r,className:g()("drop",{isHovered:a})})},Je=Object(E.a)(Fe)({minWidth:"20px","&.isHovered":{flex:1,background:"#e8e8e8"}}),Ye=function(e){var t=Ge(e),a=t.isHovered,r=t.dropRef;return Object(n.createElement)(Je,{ref:r,className:g()("drop","container-drop",{isHovered:a})})},Ke=E.a.div((function(e){var t=e.editing;return{display:"flex",flexDirection:"row",position:"relative",padding:"10px",color:"#0c0c0c",justifyContent:"space-between",alignItems:"flex-start",minHeight:"fit-content",borderWidth:"2px",background:t?"#ffffed":"white",borderColor:t?"#a5a500;":"transparent",borderStyle:"dashed",cursor:"pointer","input, textarea, select":{cursor:"pointer","&:focus":{outline:"none",borderColor:"inherit",boxShadow:"none"}},"&.input .label, &.textarea .label":{marginBottom:"-20px",zIndex:1,fontSize:"80%",marginLeft:"10px"},".control-type":{fontSize:"0.8rem",position:"absolute",top:0,right:0,border:"1px solid",padding:"2px",borderRadius:"8px"},"&:hover":{"> .controls":{opacity:1}},".controls":{opacity:0,position:"absolute",transition:"opacity 0.3s ease-in-out",display:"flex",justifyContent:"space-around",alignItems:"flex-start",".move svg":{cursor:"move"},button:{border:0,padding:0,cursor:"pointer",backgroundColor:"transparent","&:hover":{svg:{color:"#212121"}}},svg:{height:"20px",color:"gray",transition:"opacity 0.3s ease-in-out"}},">.controls":{background:t?"#ffffed":"white",top:0,right:0,padding:"5px",borderBottomLeftRadius:"5px",position:"absolute",width:"fit-content","> *":{margin:"0 5px"}},".inline-text":{padding:0,border:0,fontSize:"inherit","&:focus":{outline:"none"}},".label":{fontSize:"20px",marginBottom:"5px"},".control-preview":{flex:1,display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexDirection:"column",justifyContent:"center","&.row":{flexDirection:"column"}},"input + span":{marginLeft:"10px"}}})),Qe=function(e){var t=e.target,a=e.container,r=e.drag,i=e.displayEdit,l=re();return Object(n.createElement)("div",{className:g()("controls",{container:K(t)})},Object(n.createElement)("span",null,t.control.name),Object(n.createElement)("button",{className:"trash",onClick:function(e){e.stopPropagation(),l.dispatch({type:"DELETE",target:t,container:a})}},Object(n.createElement)(S.a,null)),i&&Object(n.createElement)("button",{onClick:function(){return l.dispatch({type:"EDIT",target:t})}},Object(n.createElement)(V.a,null)),r&&Object(n.createElement)("button",{className:"move",ref:r},Object(n.createElement)(L.a,null)))},Ze=E.a.div.attrs({className:"control-preview"})({padding:"10px"}),$e=function(e){var t=e.index,a=e.input,r=e.container,i=Object(j.a)({item:{id:a.id,fromIndex:t,fromContainer:r,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),l=Object(c.a)(i,2),o=l[0].opacity,u=l[1],s=re();return Object(n.createElement)(Ke,{ref:u,style:{opacity:o},editing:s.store.editing===a,className:g()("element-preview",a.control.id),onClick:function(){return s.dispatch({type:"EDIT",target:a})}},Object(n.createElement)(Qe,{displayEdit:!1,target:a,container:r}),Object(n.createElement)(Ze,null,Object(n.createElement)("span",{className:"label"},a.data.label),a.placeholder))},et=function(e){var t=e.index,a=e.control,r=e.container,i=re(),l=Object(j.a)({item:{id:a.id,fromIndex:t,fromContainer:r,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),o=Object(c.a)(l,2),u=o[0].opacity,s=o[1],d=Object(n.createElement)(a.data.tag,{},a.data.text);return Object(n.createElement)(Ke,{editing:i.store.editing===a,style:{opacity:u},ref:s,onClick:function(){return i.dispatch({type:"EDIT",target:a})},className:g()("element-preview",a.control.id)},Object(n.createElement)(Qe,{displayEdit:!0,target:a,container:r}),Object(n.createElement)("div",{className:"control-preview"},d))},tt=Object(E.a)(Ke)({border:"1px dashed gray",alignItems:"stretch",padding:"5px","> .container.controls":{background:"white",border:"1px dashed gray",width:"fit-content","> *":{margin:"0 5px"}},"&.container-row":{flexDirection:"column",justifyContent:"flex-start",minHeight:"fit-content","> .container-drop":{width:"100%"},"> .container-column":{margin:"-1px",flex:1},"> .container.controls":{top:"-27px",left:0,padding:"2px 5px",borderTopRightRadius:"5px",borderTopLeftRadius:"5px",borderBottomWidth:0}},"> .container-preview":{flex:1},"&.empty":{alignItems:"stretch","> .drop":{minHeight:"80px",flex:1}},"&.container-column":{"> .container.controls":{top:"calc(50% - 40px)",left:"-25px",right:"auto",display:"flex",width:"30px",flexDirection:"row-reverse",borderRadius:"5px",alignItems:"center",writingMode:"vertical-rl",textOrientation:"upright",fontSize:"80%","> *":{margin:"5px 0"}},"> .element-preview":{flex:1}}}),at=function(e){var t=e.parent,a=e.container,r=e.index,i=Object(j.a)({item:{id:a.id,fromIndex:r,fromContainer:t,type:"control"},collect:function(e){return{opacity:e.isDragging()?.4:1}}}),l=Object(c.a)(i,3),o=l[0].opacity,u=l[1],s=l[2],d=a.isRow?Xe:Ye;return Object(n.createElement)(tt,{ref:s,style:{opacity:o},className:g()("container-preview","container-".concat(a.direction),{empty:0===a.children.length})},Object(n.createElement)(d,{container:a,index:0}),Object(n.createElement)(Qe,{displayEdit:!0,target:a,container:t,drag:u}),a.children.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:t},Object(n.createElement)(nt,{index:t,container:a,el:e}),Object(n.createElement)(d,{container:a,index:t+1}))})))},nt=function(e){var t=e.el,a=e.index,r=e.container;return K(t)?Object(n.createElement)(at,{parent:r,container:t,index:a}):Z(t)?Object(n.createElement)(et,{control:t,container:r,index:a}):Q(t)?Object(n.createElement)($e,{input:t,container:r,index:a}):null},rt=Object(E.a)(me)({flex:1,display:"flex",flexDirection:"column",justifyItems:"flex-start",background:"#fafafa",padding:"20px",boxSizing:"border-box",boxShadow:"0 0 2px 1px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out",width:"fit-content",minWidth:"100%","> .container-preview":{margin:"0 2px"},"p, h1, h2, h3, h4, h5, h6":{padding:0,margin:0}}),it=function(){var e=ie().form,t=Object(y.a)({accept:"control",collect:function(e){return{isHovered:e.isOver()}},canDrop:function(){return!1}}),a=Object(c.a)(t,2),r=a[0].isHovered,i=a[1];return Object(n.createElement)(rt,{ref:i,className:g()("form-elements",{isHovered:r})},Object(n.createElement)(Xe,{container:e,index:0}),e.children.map((function(t,a){return Object(n.createElement)(n.Fragment,{key:a},Object(n.createElement)(nt,{index:a,container:e,el:t}),Object(n.createElement)(Xe,{container:e,index:a+1}))})))},lt=E.a.div({display:"flex",width:"100%",overflow:"hidden"}),ct=function(){return Object(n.createElement)(lt,null,Object(n.createElement)(it,null))},ot=E.a.div({display:"grid",gridTemplateColumns:"1fr 300px",gridTemplateRows:"1fr",height:"100%",gap:"10px",position:"relative"}),ut=function(e){var t=e.className,a=e.onChange,r=e.value,i=e.defaultValue,l=ue(i);return Object(n.useEffect)((function(){l.dispatch({type:"REPLACE",form:r})}),[r]),Object(n.useEffect)((function(){a&&a(l.store.form)}),[a,l.store]),Object(n.createElement)(w.a,{backend:x.a},Object(n.createElement)(ne.Provider,{value:l},Object(n.createElement)(ot,{className:g()("formial-editor",t)},Object(n.createElement)(ct,null),Object(n.createElement)(We,null))))},st=function(){function e(t,a){Object(h.a)(this,e),this.data=t,this.options=a}return Object(v.a)(e,[{key:"createElement",value:function(){return document.createElement("div")}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.el||(this.el=this.createElement()),this.setAttributes({"data-control":this.data.type,"data-id":this.data.id,class:g()(this.data.className,Object(u.a)({},"col-sm-".concat(this.columnSmWidth),0!==this.columnSmWidth))}),t||this.setDataAttributes(),this.el.parentElement!==e&&e.appendChild(this.el),this}},{key:"setDataAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;e&&this.data.attributes&&this.data.attributes.forEach((function(t){t.id&&e.setAttribute(t.id,String(t.value))}))}},{key:"setAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el;t&&e&&Object.keys(e).forEach((function(a){a&&t.setAttribute(a,String(e[a]))}))}},{key:"columnSmWidth",get:function(){return this.options.parent instanceof mt&&this.options.parent.isBSRow?Math.round(12/this.options.parent.children.length):0}}]),e}(),dt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e,n){var r;return Object(h.a)(this,a),(r=t.call(this,e,n)).data=e,r}return Object(v.a)(a,[{key:"createElement",value:function(){return document.createElement(this.data.tag)}},{key:"render",value:function(e){return Object(d.a)(Object(p.a)(a.prototype),"render",this).call(this,e),this.el.innerText=this.data.text,this}}]),a}(st),pt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e,n){var r;return Object(h.a)(this,a),(r=t.call(this,e,n)).data=e,r}return Object(v.a)(a,[{key:"render",value:function(e){if(Object(d.a)(Object(p.a)(a.prototype),"render",this).call(this,e,!0),this.setAttributes({"data-type":this.data.control,class:g()(this.data.className,Object(u.a)({},"col-sm-".concat(this.columnSmWidth),0!==this.columnSmWidth))}),!this.input){var t=this["_".concat(this.data.control)];if(t){var n=t.apply(this);this.input=n,this.el.appendChild(this.input)}}return this}},{key:"createInput",value:function(e){var t=document.createElement("div");t.className=this.data.classNames.wrapper;var a=document.createElement(e);this.setDataAttributes(),this.setAttributes({name:this.data.name,id:this.data.id,class:"form-control",placeholder:this.data.label},a),t.appendChild(a);var n=document.createElement("label");n.innerText=this.data.label,this.setAttributes({for:this.data.id},n);var r=this.data.attributes&&this.data.attributes.find((function(e){return"required"==e.id}));if(r&&"true"===r.value){var i=document.createElement("span");i.innerText="\u2731",this.setAttributes({class:"required-indicator"},i),n.appendChild(i)}return t.appendChild(n),t}},{key:"_textarea",value:function(){return this.createInput("textarea")}},{key:"_input",value:function(){return this.createInput("input")}},{key:"renderOptions",value:function(e){var t=this,a=document.createElement("div");this.setDataAttributes(a),a.className=this.data.classNames.wrapper;var n=document.createElement("div");n.innerText=this.data.label,a.appendChild(n);var r=this.data.choicesLayout,i=Boolean(!r||"vertical"==r),l=document.createElement("div");return l.className=g()("d-flex","flex-wrap",{"flex-column":i,"ml-2":!i}),this.optionPairs.forEach((function(a){var n=Object(c.a)(a,2),o=n[0],u=n[1],s=e(o,u),d=s.id,p=s.inputType,m=s.name,f=s.value,b=s.label,h="".concat(d,"-").concat(t.data.id),v=document.createElement("label");t.setAttributes({class:g()("form-check",{"ml-2":i,"pr-2":!i,"col-4":"three_column"===r,"col-6":"two_column"===r})},v);var E=document.createElement("input");t.setAttributes({class:"form-check-input","data-id":d,type:p,name:m,value:f,id:h},E),v.appendChild(E);var O=document.createElement("span");t.setAttributes({className:"form-check-label"},O),O.innerText=b,v.appendChild(O),l.appendChild(v)})),a.appendChild(l),a}},{key:"_radio",value:function(){var e=this;return this.renderOptions((function(t,a){return{inputType:"radio",name:e.data.name,id:t,value:a,label:a}}))}},{key:"_checkbox",value:function(){return this.renderOptions((function(e,t){return{inputType:"checkbox",name:e,value:t,id:e,label:t}}))}},{key:"_select",value:function(){var e=this,t=document.createElement("div");t.className="form-floating";var a=document.createElement("select");this.setAttributes({name:this.data.name,class:"form-select",id:this.data.id},a),this.optionPairs.forEach((function(t){var n=Object(c.a)(t,2),r=n[0],i=n[1],l=document.createElement("option");e.setAttributes({value:r},l),l.innerText=i,a.appendChild(l)})),t.appendChild(a);var n=document.createElement("label");return this.setAttributes({for:this.data.id},n),n.innerText=this.data.label,t.appendChild(n),t}},{key:"optionPairs",get:function(){var e=this.data.options;return e?e.map((function(e){return[e.id,e.value]})):[]}}]),a}(st),mt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e,n){var r;return Object(h.a)(this,a),(r=t.call(this,e,n)).data=e,r.children=e.children.map((function(e){return ft(e,{parent:Object(o.a)(r)})})).filter(Boolean),r}return Object(v.a)(a,[{key:"render",value:function(e){var t,n=this;return Object(d.a)(Object(p.a)(a.prototype),"render",this).call(this,e),this.el.className=g()(null===(t=this.el)||void 0===t?void 0:t.className,{row:this.isBSRow,"d-flex flex-column":!this.isBSRow,"formial-form":"FORM"==this.data.type}),this.children.forEach((function(e){return e.render(n.el)})),this}},{key:"isBSRow",get:function(){return"column"===this.data.direction}}]),a}(st),ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return B(e)?new dt(e,t):M(e)||W(e)?new mt(e,t):z(e)?new pt(e,t):new st(e,t)},bt={id:"48be90c9-3a9a-4fc6-9626-242a30febc05",type:"FORM",control:"col",name:"col-2335",direction:"row",children:[{id:"d69b7300-312a-4b8b-9da9-b616e987b8b4",type:"TEXT",control:"heading",name:"heading-4027",tag:"h3",text:"Hello World",className:""},{id:"9e2e85b9-b24e-4d51-b126-a7f5c579039a",type:"TEXT",control:"para",name:"para-9368",tag:"p",text:"Please, tell us a bit about yourself",className:""},{id:"91a1e96a-e603-4dd7-92fd-14b4090c4754",type:"CONTAINER",control:"col",name:"col-7258",direction:"column",children:[{id:"09f04ad7-b72b-481d-90c4-535bb5b1b632",type:"CONTAINER",control:"row",name:"row-1462",direction:"row",children:[{id:"e6b074bf-4c4d-447e-890a-bb52bc24aece",type:"INPUT",control:"input",name:"name",label:"Your name",className:"mb-2",classNames:{wrapper:"form-floating",label:"",input:"form-control"},attributes:[{id:"type",value:"text"},{id:"required",value:"true"}]},{id:"051dc23f-d3b6-4783-a45d-54f6f4801ba2",type:"INPUT",control:"input",name:"email",label:"Email",className:"mb-2",classNames:{wrapper:"form-floating",label:"",input:"form-control"},attributes:[{id:"required",value:"true"},{id:"type",value:"email"}]},{id:"11fa0234-0c92-4a2c-864e-668cd8580fd8",type:"INPUT",control:"textarea",name:"address",label:"Address",className:"mb-2",classNames:{wrapper:"form-floating",label:"",input:"form-control"},attributes:[]}],className:"",attributes:[]},{id:"05df9d75-a59f-4f44-99bb-c37bd17db17d",type:"CONTAINER",control:"row",name:"row-10995",direction:"row",children:[{id:"1d1b3a3d-88b0-4ca2-979b-4fb231c33f9a",type:"INPUT",control:"checkbox",name:"foods",options:[{id:"steak",value:"Steak"},{id:"tomatoe",value:"Tomato"},{id:"pinapple",value:"Pineapple"},{id:"spinach",value:"Spinach"},{id:"candy",value:"Candy"},{id:"broccoli ",value:"Broccoli"}],choicesLayout:"vertical",label:"Which foods do you like?",className:"mb-2",classNames:{wrapper:"form-control",label:"",input:"form-control"},attributes:[]},{id:"7a16f198-cac0-440e-93a8-3c0bc153184e",type:"INPUT",control:"radio",name:"cats",options:[{id:"1",value:"One"},{id:"2",value:"Two"},{id:"3",value:"Three"}],choicesLayout:"vertical",label:"How many Cats?",className:"mb-2",classNames:{wrapper:"form-control",label:"",input:"form-control"},attributes:[]},{id:"b8a55c2a-6044-4672-a384-74be779b8f95",type:"INPUT",control:"select",name:"number",options:[{id:"2",value:"2"},{id:"1",value:"one"},{id:"5",value:"5"},{id:"42",value:"forty two"}],label:"Pick a number",className:"mb-2",classNames:{wrapper:"form-floating",label:"",input:"form-control"},attributes:[]}],className:"",attributes:[]}],className:"",attributes:[]}],className:"formial-form",attributes:[]},ht=function(){var e=r.a.useState(),t=Object(c.a)(e,2),a=t[0],n=t[1],i=r.a.useRef(null);return r.a.createElement("div",{id:"example-builder"},r.a.createElement("h3",null,"Formial Demo"),r.a.createElement("p",null,"This is an example of Formial editing and rendering forms.  The source code for this demo can be viewed in ",r.a.createElement("a",{href:"https://github.com/nathanstitt/formial/blob/main/example/src/App.tsx"},"example/src/App.tsx"),"."),r.a.createElement(ut,{onChange:function(e){return n(e)},defaultValue:bt}),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e=a.serialize();console.log(JSON.stringify(e)),function(e,t){e.innerHTML="";var a=ft(t);a&&a.render(e)}(i.current,e)}},"Render")),r.a.createElement("hr",null),r.a.createElement("div",{className:"mb-4",ref:i}))};l.a.render(r.a.createElement(ht,null),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.03f63ca2.chunk.js.map